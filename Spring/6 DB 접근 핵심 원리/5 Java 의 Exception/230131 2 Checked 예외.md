# Checked ì˜ˆì™¸

Checked ëŠ” Catch ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ Throw ë¡œ ë˜ì§€ëŠ” ì²˜ë¦¬ë¥¼ í•„ìˆ˜ë¡œ í•´ì•¼í•˜ëŠ” ì˜ˆì™¸ì´ë‹¤.

## âœï¸Â Checked ì˜ˆì™¸ ì²˜ë¦¬í•˜ê¸°

### ğŸ“Throw

- ì—°ìŠµìš© ìƒˆë¡œìš´ ì˜ˆì™¸ ê°ì²´ë¥¼ MyCheckedException ìƒì„±í–ˆë‹¤.
- Checked Exception ì„ ë˜ì§ˆ ë•ŒëŠ” Method ì´ë¦„ ì˜†ì— ê¼­ throws ì„ ì–¸ì„ í•´ì•¼ í•œë‹¤.

```java
package hello.jdbc.excepiton;

import lombok.extern.slf4j.Slf4j;

@Slf4j
public class CheckedTest {

    static class MyCheckedException extends Exception {

        /**
         * Exception ì„ ìƒì†ë°›ì€ ì˜ˆì™¸ëŠ” ì²´í¬ ì˜ˆì™¸ê°€ ëœë‹¤.
         */
        public MyCheckedException(String message) {
            super(message);
        }
    }

    // Checked Exception ì„ ë˜ì§ˆ ë•ŒëŠ” Method ì´ë¦„ ì˜†ì— ê¼­ ì„ ì–¸ì„ í•´ì•¼ í•œë‹¤.
    static class Repository{
        public void call() throws MyCheckedException {
            throw new MyCheckedException("ex");
        }
    }

}
```

<br>

### ğŸ“Â Catch

- try , catch ë¥¼ ì‚¬ìš©í•´ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

```java
    static class Service{
        // Repository instance
        Repository repository = new Repository();

        // ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œ
        public void callCatch() {
            try {
                repository.call();
            } catch (MyCheckedException e) {
                // ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§
                log.info("ì˜ˆì™¸ ì²˜ë¦¬, message = {}", e.getMessage(), e);
            }
        }
    }
```

<br>

## âœï¸Â Test

### ğŸ“Â Catch

- Service ì—ì„œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ëëƒˆê¸° ë•Œë¬¸ì— ì •ìƒ íë¦„ìœ¼ë¡œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.

```java
    @Test
    void checked_catch() {
        Service service = new Service();
        service.callCatch();
    }
```

ğŸ”Â ì¶œë ¥ë¬¼ í™•ì¸

- Repository ì—ì„œ ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ë•Œ ì‘ì„±í•œ ì˜ˆì™¸ ë©”ì„¸ì§€ â€œexâ€ ê°€ log.info ì˜ e.message ë¥¼ í†µí•´ ì¶œë ¥ë¨
    - ì˜ˆì™¸ ì²˜ë¦¬, message = e
- log.info ì˜ e ë¥¼ í†µí•´ ì˜ˆì™¸ì˜ ë°œìƒ ì›ì¸ê³¼ ìœ„ì¹˜ê°€ ì¶œë ¥ë¨

```java
10:51:58.460 [main] INFO hello.jdbc.excepiton.CheckedTest - ì˜ˆì™¸ ì²˜ë¦¬, message = ex
hello.jdbc.excepiton.CheckedTest$MyCheckedException: ex
	at hello.jdbc.excepiton.CheckedTest$Repository.call(CheckedTest.java:41)
	at hello.jdbc.excepiton.CheckedTest$Service.callCatch(CheckedTest.java:31)
	...
```

<br>

### ğŸ“Â Throw

ì´ë²ˆì—” Service ì—ì„œ ì˜ˆì™¸ë¥¼ í•œë²ˆ ë” ë˜ì§€ëŠ” method ë¥¼ ë§Œë“¤ì—ˆë‹¤.

```java
static class Service{
        Repository repository = new Repository();

        // ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ì½”ë“œ
        public void callThrow () throws MyCheckedException {
            repository.call();
        }

        // ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œ
        public void callCatch() {
            try {
                repository.call();
            } catch (MyCheckedException e) {
                // ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§
                log.info("ì˜ˆì™¸ ì²˜ë¦¬, message = {}", e.getMessage(), e);
            }
        }
    }
```

- method í˜¸ì¶œ
    - ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜ˆì™¸ë¥¼ ê°€ì§„ Method ë¥¼ í˜¸ì¶œí•´ MyCheckedException ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  ë§Œë‹¤.

```java
    @Test
    void checked_throw(){
        Service service = new Service();
        assertThatThrownBy(() -> service.callThrow())
                .isInstanceOf(MyCheckedException.class);
    }
```

<br>

## âœï¸Â Checked ì˜ˆì™¸ì˜ ì¥ë‹¨ì 

- ì¥ì 
    - ê°œë°œìê°€ ì‹¤ìˆ˜ë¡œ ì˜ˆì™¸ë¥¼ ëˆ„ë½í•˜ì§€ ì•Šë„ë¡ ì»´íŒŒì¼ì„ í†µí•´ ë¬¸ì œë¥¼ ì¡ì•„ì£¼ëŠ” ì•ˆì „ì¥ì¹˜ ì—­í• ì„ í•´ì¤€ë‹¤.
- ë‹¨ì 
    - ê°œë°œìê°€ ëª¨ë“  ì²´í¬ ì˜ˆì™¸ë¥¼ ë°˜ë“œì‹œ ì¡ê±°ë‚˜ ë˜ì§€ë„ë¡ ì²˜ë¦¬í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë„ˆë¬´ ë²ˆê±°ë¡œìš´ ì¼ì´ ëœë‹¤.
    - ì‚¬ì‚¬ë¡œìš´ ì˜ˆì™¸ê¹Œì§€ ëª¨ë‘ ì±™ê²¨ì•¼ë§Œ í•œë‹¤.
    - ì˜ì¡´ê´€ê³„ì— ë”°ë¥¸ ë‹¨ì ë„ ë°œìƒí•œë‹¤. ğŸ”—
        - Repository ì—ì„œ ë„˜ì–´ì˜¨ Contoller ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ë¥¼ Service ê°€ ì¤‘ê°„ì—ì„œ í•˜ë‚˜í•˜ë‚˜ Throw í•´ì¤˜ì•¼ í•œë‹¤.