# ìš”ì²­ Mapping ë°©ë²•

## âœï¸Â Â URL ë§¤í•‘

- ê°€ì¥ ê°„ë‹¨í•œ ë§¤í•‘ ë°©ì‹
- ìš”ì²­ url ì„ ì´ìš©í•´ mapping ëœ method ê°€ ì‹¤í–‰ëœë‹¤.
    - ìš”ì²­ URL ë§ˆì§€ë§‰ì— / ê°€ ìˆì–´ë„ ë™ì¼í•œ URL ë¡œ ì¸ì •í•œë‹¤.
    - /hello-basic = /hello-basic/

```java
    @RequestMapping("/hello-basic")
    public String helloBasic() {
        log.info("helloBasic");
        return "ok";
    }
```

âš ï¸Â  ë°°ì—´í˜•ì‹ìœ¼ë¡œ ë³µìˆ˜ URL ì„ ë§¤í•‘í•  ìˆ˜ ìˆë‹¤.

```java
@RequestMapping({"/hello-basic","/hello-basic2"})
    public String helloBasic() {
        log.info("helloBasic");
        return "ok";
    }
```

<br>

## âœï¸Â PathVariable - ê²½ë¡œ ë³€ìˆ˜

URL ì— íŠ¹ì • data ë¥¼ ì§€ì¹­í•˜ëŠ” ì‹ë³„ìë¥¼ ì…ë ¥í•´ method ì—ì„œ í•´ë‹¹ ê°’ì„ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ business ë¡œì§ì„ ìš”ì²­í•œë‹¤.

âš ï¸Â Query Parameter ë°©ì‹ê³¼ëŠ” ë‹¤ë¥¸ ë°©ì‹ì´ë‹¤.

[ğŸ”—Â Query Parameter ë°©ì‹](https://github.com/choideakook/TIL/blob/main/Spring/8%20Spring%20MVC%20í•µì‹¬ê¸°ìˆ /3%20HTTP%20ìš”ì²­ê³¼%20ì‘ë‹µ/230213%201%20GET%20Query%20Parameter.md)

### ğŸ“Â ê²½ë¡œë³€ìˆ˜ ì ìš©

```java
    @GetMapping("/mapping/{userId}")
    public String mappingPath(@PathVariable String userId){

        // ìš”ì²­ URL ì˜ { } ì•ˆì˜ ë‚´ìš©ì„ ë³€ìˆ˜ì— ë‹´ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
        log.info("mapping path = {}", userId);
        return "ok";
    }
```

### ğŸ”Â ê²°ê³¼ê°’

- ìš”ì²­ url : http://localhost:8080/mapping/userA
    - ìš”ì²­ url ì— ì…ë ¥í•œ ë¶€ë¶„ì´ log ë¡œ ì˜ ì¶œë ¥ë˜ì—ˆë‹¤.

```java
2023-02-17 20:19:41.603  INFO 62365 --- [nio-8080-exec-2] 
    h.s.b.requestmapping.MappingController   : 
        mapping path = userA
```

<br>

âš ï¸Â ë§Œì•½ URL ì˜ ì‹ë³„ê°’ê³¼ method ì˜ ë³€ìˆ˜ëª…ì´ ë‹¤ë¥¼ê²½ìš° ì‹ë³„ê°’ì„ ëª…ì‹œí•´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

```java
    @GetMapping("/mapping/{userId}")    // ì‹ë³„ê°’ê³¼ ë³€ìˆ˜ ë³‘ì´ ë‹¬ë¼ì„œ ëª…ì‹œí•´ì¤Œ
    public String mappingPath(@PathVariable("userId") String data){

        log.info("mapping path = {}", data);
        return "ok";
    }
```

<br>

### ğŸ“Â ë‹¤ì¤‘ ê²½ë¡œ ë³€ìˆ˜ ì‚¬ìš©

í•˜ë‚˜ì˜ URL ì— ë³µìˆ˜ì˜ ê²½ë¡œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

- ìš”ì²­ URL
    - http://localhost:8080/mapping/users/userA/orders/100
    - users ì¤‘ì—ì„œ userA ë¥¼, userA ê°€ ì£¼ë¬¸í•œ ì£¼ë¬¸ë²ˆí˜¸ 100 ì„ ìš”ì²­í•˜ëŠ” url ì´ë‹¤.

```java
@GetMapping("/mapping/users/{userId}/orders/{orderId}")
    public String mappingPath(
            @PathVariable String userId,
            @PathVariable Long orderId
    ) {
        log.info("mappingPath userId = {} , orderId = {}", userId, orderId);
        return "ok";
    }
```

### ğŸ”Â ì¶œë ¥ í™•ì¸

- í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ 2ê°œì˜ ê°’ì„ ë³€ìˆ˜ë¡œ ë§Œë“œëŠ”ë° ì„±ê³µí–ˆë‹¤.

```java
2023-02-17 20:34:50.790  INFO 62433 --- [nio-8080-exec-3] 
    h.s.b.requestmapping.MappingController   : 
        mappingPath userId = userA , orderId = 100
```

<br>

## âœï¸Â íŠ¹ì • ì¡°ê±´ Mapping

- URL ì„ ì •í™•íˆ ìš”ì²­í•˜ë”ë¼ë„ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ì§€ ëª»í•˜ë©´ mapping ì— ì‹¤íŒ¨í•œë‹¤.

### ğŸ“Â íŠ¹ì • Parameter ì¡°ê±´ mapping

íŠ¹ì • Param ì´ ìˆê±°ë‚˜ ì—†ëŠ” ì¡°ê±´ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

- Query parameter ì— `mode=debug` ê°€ ìˆì–´ì•¼ë§Œ method ê°€ ì‹¤í–‰ë¨

```java
    @GetMapping(value = "/mapping-param", params = "mode=debug")
    public String mappingParam() {
        log.info("mappingParam");
        return "ok";
    }
```

ğŸ”Â ì¶œë ¥ë¬¼ í™•ì¸

```java
// íŒŒë¼ë¯¸í„°ê°€ ì •í™•íˆ ì…ë ¥ëœ ê²½ìš° "mode=debug"
2023-02-17 21:32:01.537  INFO 62738 --- [nio-8080-exec-2] 
    h.s.b.requestmapping.MappingController   : 
        mappingParam // ì„±ê³µ

// íŒŒë¼ë¯¸í„°ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì€ ê²½ìš°
2023-02-17 21:32:01.767  WARN 62738 --- [nio-8080-exec-3] 
    .w.s.m.s.DefaultHandlerExceptionResolver : 
        Resolved [org.springframework.web.bind.UnsatisfiedServletRequestParameterException: 
            Parameter conditions "mode=debug" not met for actual request parameters: ]
            // ì‹¤íŒ¨ (400 Bad Request ì—ëŸ¬ê°€ ë°œìƒë¨)
```

âš ï¸Â ì˜ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹ˆë‹¤.

<br>

### ğŸ“Â íŠ¹ì • Header ì¡°ê±´ Mapping

url ì— íŠ¹ì • param ê°€ ìˆì•¼ ì‹¤í–‰ë¬ë˜ê²ƒ ì²˜ëŸ¼ 
HTTP ì‘ë‹µ message ì˜ header ì— íŠ¹ì • ì¡°ê±´ì´ ìˆì–´ì•¼ ì‹¤í–‰ë˜ëŠ” ë°©ì‹ì´ë‹¤.

- header ì˜ mode = debug  ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ ì •ìƒì ìœ¼ë¡œ ì‘ë™ëœë‹¤.

```java
@GetMapping(value = "/mapping-header", headers = "mode=debug")
    public String mappingHeader() {
        log.info("mappingHeader");
        return "ok";
    }
```

<br>

### ğŸ“Â ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘
HTTP ìš”ì²­ Content-Type

ìš”ì²­ Header ì˜ Content-type ì´ ì¼ì¹˜í•´ì•¼ mapping ì— ì„±ê³µí•  ìˆ˜ ìˆìŒ

- consumes = {ì»¨í…ì¸  íƒ€ì…}
- ì»¨ìŠˆë¨¸ ì—ì„œ íŒŒìƒëœ ë‹¨ì–´ì´ë‹¤.
- í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•˜ëŠ” body ì˜ ì»¨í…ì¸  íƒ€ì…ì„ ì„¤ì •í•˜ëŠ” ì˜µì…˜ì´ë‹¤.

```java
    // json íƒ€ì…ë§Œ mapping í•  ìˆ˜ ìˆìŒ
    @PostMapping(
        value = "/mapping-consume", 
        consumes = "application/json"
    )
    public String mappingConsumes() {
        log.info("mappingConsumes");
        return "ok";
    }
```

- ì´ ì™¸ì˜ íƒ€ì… ëª…ë ¹ì–´

```java
* Content-Type í—¤ë” ê¸°ë°˜ ì¶”ê°€ ë§¤í•‘ Media Type
   * consumes="application/json"
   * consumes="!application/json"
   * consumes="application/*"
   * consumes="*\/*"
   * MediaType.APPLICATION_JSON_VALUE
```

<br>

### ğŸ“Â ë¯¸ë””ì–´ íƒ€ì… ì¡°ê±´ ë§¤í•‘
HTTP ìš”ì²­ Accept

ìš”ì²­ Header ì˜ Accept ê°€ ì¼ì¹˜í•´ì•¼ mapping ì— ì„±ê³µí•  ìˆ˜ ìˆìŒ

- produce = {ì»¨í…ì¸  íƒ€ì…}
- Accept ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë°›ì•„ë“œë¦´ ìˆ˜ ìˆëŠ” ë¯¸ë””ì–´ íƒ€ì…ì„ ì„¤ì •í•˜ëŠ” ì˜µì…˜ì´ë‹¤.

```java
  @PostMapping(value = "/mapping-produce", produces = "text/html")
  public String mappingProduces() {
      log.info("mappingProduces");
      return "ok";
  }
```

- ì´ ì™¸ì˜ íƒ€ì… ëª…ë ¹ì–´

```java
* Accept í—¤ë” ê¸°ë°˜ Media Type * produces = "text/html"
   * produces = "!text/html"
   * produces = "text/*"
   * produces = "*\/*" // ëª¨ë“  íƒ€ì…ì„ ìˆ˜ìš©ê°€ëŠ¥í•˜ë‹¤ëŠ” ì˜ë¯¸
```