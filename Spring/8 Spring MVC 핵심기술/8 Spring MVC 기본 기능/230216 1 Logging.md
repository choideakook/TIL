# Logging

ìš´ì˜ ì‹œìŠ¤í…œì—ì„œëŠ” `System.out.println("...")` ê°™ì€ ì‹œìŠ¤í…œ ì½˜ì†”ì„ ì‚¬ìš©í•œ ì¶œë ¥ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

ìš´ì˜ ì‹œìŠ¤í…œì—ì„œëŠ” ë³„ë„ì˜ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ `Log` ë¥¼ ì¶œë ¥í•œë‹¤.

## âœï¸Â Logging ë¼ì´ë¸ŒëŸ¬ë¦¬

Spring Boot ë¥¼ ì‚¬ìš©í•˜ë©´ Spring Boot Logging Library ì¸ `spring-boot-starter-logging` ê°€ í•¨ê»˜ í¬í•¨ëœë‹¤.

### ğŸ“Â ë¼ì´ë¸ŒëŸ¬ë¦¬

- [ğŸ”—Â SLF4J](http://www.slf4j.org)
    - ì‹œì¤‘ì— ìˆëŠ” ìˆ˜ ë§ì€ log ê´€ë ¨ í”„ë ˆì„ì›Œí¬ë“¤ì„ í†µí•©í•´ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- [ğŸ”—Â Logback](https://logback.qos.ch)
    - SLF4J ë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬í˜„ì²´

<br>

## âœï¸Â Log ì‚¬ìš©í•˜ê¸°

- @RestController
    - Rest API ì˜ Rest ì™€ ê°™ì€ ì˜ë¯¸ì´ë‹¤.
        - Rest API ë¥¼ ì‚¬ìš©í•  ë•Œ í•µì‹¬ì ì¸ ì—­í• ì„ í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.
    - <U>@RestController</U> ëŠ” return ê°’ì„ String ê·¸ëŒ€ë¡œ ì „ë‹¬í•˜ëŠ” Controller ì´ë‹¤.
    - <U>@Controller</U> ëŠ” return ê°’ìœ¼ë¡œ view path ë‚˜ Model View ë¥¼ ë°˜í™˜í•œë‹¤.

```java
package hello.springmvc.basic;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class LogTestController {

    // get Logger ì— í˜„ì¬ Class ë¥¼ ì§€ì •í•´ì¤Œ ( = getClass())
    private final Logger log = LoggerFactory.getLogger(getClass());

    @RequestMapping("/log-test")
    public String logTest() {
        Stringname= "Spring";

        System.out.println("name = " +name);
        log.info("info log={}",name);

        return "ok";
    }
}
```

### ğŸ”Â ì¶œë ¥ë¬¼ í™•ì¸

- log ë¡œ ì¶œë ¥í•œ ê²°ê³¼ë¬¼ì€ ë‹¤ì–‘í•œ ì •ë³´ì™€ í•¨ê»˜ message ê°€ ì¶œë ¥ëœë‹¤.
    - ë‚ ì§œ, ì‹œê°„, log level, id ê°’, ì“°ë ˆë“œ, ì»¨íŠ¸ë¡¤ëŸ¬ì´ë¦„, ì „ë‹¬í•œ ë‚´ìš©

```java
// System.out.println ì¶œë ¥ë¬¼
name = Spring

// log ì¶œë ¥ë¬¼
2023-02-16 20:40:29.560  INFO 59697 --- [nio-8080-exec-2] hello.springmvc.basic.LogTestController  : info log=Spring
```

<br>

### ğŸ“Â Log ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°

- ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ ê°™ì€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```java
package hello.springmvc.basic;

import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@Slf4j
@RestController
public class LogTestController {

    @RequestMapping("/log-test")
    public String logTest() {
        String name = "Spring";

        System.out.println("name = " + name);
        log.info("info log = {}", name);

        return "ok";
    }
}
```

<br>

### ğŸ“Â ë‹¤ì–‘í•œ log ì˜ ê¸°ëŠ¥ë“¤

- ë‹¤ì–‘í•œ ìƒí™©ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” log ê¸°ëŠ¥ë“¤ì´ ìˆë‹¤.

```java
        log.trace("trace log = {}", name);
        log.debug("debug log = {}", name);
        log.warn("warn log = {}", name);
        log.error("error log = {}", name);
        log.info("info log = {}", name);
```

### ğŸ”Â ì¶œë ¥ë¬¼ í™•ì¸

- ì´ëŒ€ë¡œ ì¶œë ¥í•˜ë©´ trace ì™€ debug ëŠ” ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.

```java
2023-02-16 21:03:02.084  WARN 59972 --- [nio-8080-exec-2] hello.springmvc.basic.LogTestController  : warn log = Spring
2023-02-16 21:03:02.084 ERROR 59972 --- [nio-8080-exec-2] hello.springmvc.basic.LogTestController  : error log = Spring
2023-02-16 21:03:02.084  INFO 59972 --- [nio-8080-exec-2] hello.springmvc.basic.LogTestController  : info log = Spring
```

<br>

### ğŸ“Â ëª¨ë“  log í™•ì¸í•˜ê¸°

- application.properties ì—ì„œ log ê´€ë ¨ í™˜ê²½ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤.
    - defalt ê°’ì€ `logging.level.root=info` ì´ë‹¤.

```java
logging.level.hello.springmvc=trace
```

ğŸ”Â ì¶œë ¥í™•ì¸

```java
2023-02-16 21:11:01.192 TRACE 60014 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : trace log = Spring
2023-02-16 21:11:01.192 DEBUG 60014 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : debug log = Spring
2023-02-16 21:11:01.192  WARN 60014 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : warn log = Spring
2023-02-16 21:11:01.192 ERROR 60014 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : error log = Spring
2023-02-16 21:11:01.192  INFO 60014 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : info log = Spring
```

<br>

### ğŸ“Â Debug ë ˆë²¨ê¹Œì§€ë§Œ ë¡œê·¸ ì¶œë ¥í•˜ê¸°

- í™˜ê²½ì„¤ì •ì— debug ë¥¼ ì…ë ¥í•´ì£¼ë©´ ëœë‹¤.

```java
logging.level.hello.springmvc=debug
```

ğŸ”Â ì¶œë ¥ë¬¼ í™•ì¸

```java
2023-02-16 21:12:06.783 DEBUG 60023 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : debug log = Spring
2023-02-16 21:12:06.783  WARN 60023 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : warn log = Spring
2023-02-16 21:12:06.783 ERROR 60023 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : error log = Spring
2023-02-16 21:12:06.783  INFO 60023 --- [nio-8080-exec-1] hello.springmvc.basic.LogTestController  : info log = Spring
```

<br>

### ğŸ“Â ì •ë¦¬

- ë¡œê·¸ ë ˆë²¨ì„ ì§€ì •í• ê²½ìš° ì§€ì •ëœ ë¡œê·¸ë¥¼ í¬í•¨í•œ í•˜ìœ„ ë ˆë²¨ ë¡œê·¸ê¹Œì§€ ì¶œë ¥ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
    - ë¡œê·¸ ë ˆë²¨ : trace > debug > info > warn > error
    - trace : ê²½ë¡œë¥¼ ì¶”ì í•˜ê¸° ìœ„í•´ ì‚¬ìš©
    - debug : ì¼ë°˜ ì •ë³´ë¥¼ ìƒì„¸íˆ ë‚˜íƒ€ë‚¼ ë•Œ ì‚¬ìš©
    - info : ì¼ë°˜ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚¼ ë•Œ ì‚¬ìš©
    - warn : ì—ëŸ¬ëŠ” ì•„ë‹ˆì§€ë§Œ ì£¼ì˜ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©
    - error : ì¼ë°˜ ì—ëŸ¬ê°€ ë°œìƒí•  ë•Œ ì‚¬ìš©
- ìµœì í™”
    - ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ìƒí™©ì— ë§ê²Œ ë¡œê·¸ ë ˆë²¨ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ëŠ” ê°•ì ì´ ìˆë‹¤.
    - ê°œë°œ ì„œë²„ : debug
        - ê°œë°œí•˜ë©´ì„œ ë””ë²„ê¹… ê´€ë ¨ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ í¸ë¦¬í•˜ë‹¤.
    - ë¡œì»¬ ì„œë²„ : trace
        - ë¡œì»¬ ì„œë²„ì„ìœ¼ë¡œ ëª¨ë“  ì¢…ë¥˜ì˜ ë¡œê·¸ë¥¼ í™•ì¸í•œë‹¤.
    - ìš´ì˜ ì„œë²„ : info
        - ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©ë˜ëŠ” ì„œë²„ê¸° ë•Œë¬¸ì— trace ë‚˜ debug ê¸°ëŠ¥ì„ ì‚¬ìš©í•  í”¼í•„ìš”ê°€ ì—†ë‹¤.
- ìœ ì§€ë³´ìˆ˜ì˜ í¸ë¦¬í•¨
    - ì„¤ì •ì„ í†µí•´ì„œ ë¡œê·¸ë¥¼ ë³„ë„ì˜ íŒŒì¼ë¡œ ìƒì„±í•´ ì¶œë ¥ëœ ë¡œê·¸ë¥¼ ê´€ë¦¬í•  ìˆ˜ ë„ ìˆë‹¤.

<br>

### ğŸ“Â log { } ì˜ í•„ìš”ì„±

level ì„ debug ë¡œ ì„¤ì •í•˜ë©´ trace ëŠ” ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.

- `log.trace("log = " + name)`
    
    ì´ ì½”ë“œëŠ” ë‹¹ì—°íˆ ì½˜ì†”ì— ì¶œë ¥ë˜ì§€ ì•ˆê² ì§€ë§Œ,
    ì¶œë ¥ë€ì— ì¡´ì¬í•˜ëŠ” + ì—°ì‚°ì ë•Œë¬¸ì— ì˜ë¯¸ ì—†ëŠ” ì—°ì‚°ì´ ì‘ë™ë˜ì–´ ë²„ë¦°ë‹¤.
    
- `log.trace("log = {}", name)`
    
    ì´ ì½”ë“œëŠ” ì—°ì‚°ìê°€ ì—†ê¸° ë•Œë¬¸ì— ì¶œë ¥ì´ ë˜ì§€ ì•Šì„ ë• ì™„ì „íˆ ë¬´ì‹œëœë‹¤.