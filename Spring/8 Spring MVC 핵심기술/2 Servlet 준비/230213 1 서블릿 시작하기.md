# ì„œë¸”ë¦¿ ì‹œì‘í•˜ê¸°

## âœï¸Â Spring Boot ì„œë¸”ë¦¿ í™˜ê²½ êµ¬ì„±

ì„œë¸”ë¦¿ì€ í†°ìº£ ê°™ì€ WAS ë¥¼ ì§ì ‘ ì„¤ì¹˜í•˜ê³ , ê·¸ ìœ„ì— ì„œë¸”ë¦¿ ì½”ë“œë¥¼ Class íŒŒì¼ë¡œ ë¹Œë“œí•´ì„œ ì˜¬ë¦°ë‹¤ìŒ,
í†°ìº£ ì„œë²„ë¥¼ ì‹¤í–‰í•´ì•¼ í•œë‹¤.

- ì°¸ê³ ë¡œ ì´ ê³¼ì •ì€ ë„ˆë¬´ ë³µì¡í•˜ê³  ë²ˆê±°ë¡­ë‹¤.

Spring Boot ëŠ” í†°ìº£ ì„œë²„ë¥¼ ë‚´ì¥í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, ë³„ë„ì˜ WAS ì„¤ì¹˜ ì—†ì´ í¸ë¦¬í•˜ê²Œ ì„œë¸”ë¦¿ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

<br>

### ğŸ“Â Main Application

- @ServletComponentScan
    - í˜„ì¬ ìœ„ì¹˜ë¥¼  í¬í•¨í•œ ëª¨ë“  í•˜ìœ„ package ì— ìˆëŠ” ì„œë¸”ë¦¿ ìë™ìœ¼ë¡œ ë“±ë¡í•´ ì‹¤í–‰ì‹œí‚¤ëŠ” ê¸°ëŠ¥

```java
package hello.servlet;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.web.servlet.ServletComponentScan;

// ì„œë¸”ë¦¿ ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€
// ì„œë¸”ë¦¿ ìë™ë“±ë¡
@ServletComponentScan  
@SpringBootApplication
public class ServletApplication {

	public static void main(String[] args) {
		SpringApplication.run(ServletApplication.class, args);
	}

}
```

<br>

### ğŸ“Servlet Class

- ë¶€ëª¨ Class ì¸ `HttpServlet` ê°ì²´ë¥¼ ìƒì†í•œë‹¤.
- `@WebServlet` ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€
    - í•´ë‹¹ Class ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Servlet ì´ ë“±ë¡ëœë‹¤.
- Method Override (^ + o)
    - protected service ë©”ì†Œë“œë¥¼ override í•œë‹¤.
        - ì´ˆë¡ìƒ‰ í’€ë¦° ìë¬¼ì‡  ëª¨ì–‘ì€ `public`
        - ì—´ì‡  ëª¨ì–‘ì€ `protected`

![s8211.png](%E1%84%89%E1%85%A5%E1%84%87%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%BA%20%E1%84%89%E1%85%B5%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20b737260c7b3745db9fc543686ad88ee5/s8211.png)

<br>

### ğŸ“Â Servlet Test

ì»´íŒŒì¼ í›„ ì„¤ì •í•œ url ì£¼ì†Œì¸ http://localhost:8080/hello ì— ì ‘ì†í•˜ë©´ ì¶œë ¥ë¬¼ì´ ì¶œë ¥ë˜ëŠ” ì§€ Test

- @WebServlet - ì„œë¸”ë¦¿ ì–´ë…¸í…Œì´ì…˜
- neme - ì„œë¸”ë¦¿ ì´ë¦„
- urlPatterns - URL ë§¤í•‘

```java
package com.example.servlet.basic;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@WebServlet(name = "helloServlet", urlPatterns = "/hello")
public class HelloServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        System.out.println("HelloServlet.service");
        System.out.println("request = " + request);
        System.out.println("response = " + response);
    }
}
```

ğŸ”Â ì¶œë ¥ë¬¼ í™•ì¸

- ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë¬¼ì´ ì¶œë ¥ëœë‹¤.
- request ì™€ response ëŠ” interface ì¸ë°,
ì´ë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬í˜„ì²´ì˜ ì •ë³´ê°€ ì¶œë ¥ë˜ì—ˆë‹¤.

```java
HelloServlet.service // ë‹¨ìˆœ ì¶œë ¥ë¬¼
request = org.apache.catalina.connector.RequestFacade@3c7a20a1 // ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê°ì²´ ì •ë³´ì˜ ì¶œë ¥ë¬¼
response = org.apache.catalina.connector.ResponseFacade@627a49b
```

<br>

### ğŸ“Â Query Parameter ë°›ì•„ë³´ê¸°

ì´ë²ˆì—” url ì— parameter ë¥¼ ì…ë ¥í•´ request ë¡œ ë°›ì•„ë³´ëŠ” test ë¥¼ í•´ë³´ê² ë‹¤.

- http://localhost:8080/hello?username=hi
    - param ê°’ìœ¼ë¡œ hi ë¥¼ ìš”ì²­í–ˆë‹¤.

```java
    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        System.out.println("HelloServlet.service");
        System.out.println("request = " + request);
        System.out.println("response = " + response);

        // url ì—ì„œ ìš”ì²­í•œ ê°’ì„ request ë¥¼ ì´ìš©í•´ êº¼ë‚´ì„œ ì¶œë ¥í–ˆë‹¤.
        String username = request.getParameter("username");
        System.out.println("username = " + username);
    }
```

ğŸ”Â ì¶œë ¥ë¬¼ í™•ì¸

```java
HelloServlet.service
request = org.apache.catalina.connector.RequestFacade@1505f217
response = org.apache.catalina.connector.ResponseFacade@24fa5a7b
// ì¶œë ¥ë¬¼ì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ì—ˆë‹¤.
username = hi
```

<br>

### ğŸ“Â ì‘ë‹µ í•´ë³´ê¸°

ìš”ì²­ë°›ì€ ê°’ì— ëŒ€í•œ ì‘ë‹µì„ response ê°ì²´ë¥¼ í†µí•´ì„œ HTTP ë©”ì‹œì§€ë¡œ ì‘ì„±í•´ ë³´ë‚¸ë‹¤.

[ğŸ”—Â HTTP message](https://github.com/choideakook/TIL/blob/main/Spring/5%20HTTP%20ì›¹%20ê¸°ë³¸%20ì§€ì‹/2%20HTTP%20ê°œë…ê³¼%20ë©”ì„œë“œ/230120%201%20ëª¨ë“ ê²ƒì´%20HTTP.md)

- HTTP message Header
    - ì»¨í…ì¸  íƒ€ì…ê³¼ ë¬¸ìì •ë³´ë¥¼ ì…ë ¥í•´ì¤€ë‹¤.
- HTTP message body
    - ì‹¤ì§ˆì ìœ¼ë¡œ ì „ë‹¬í•´ì£¼ê³ ì‹¶ì€ ë‚´ìš©ì„ ì…ë ¥í•œë‹¤.

```java
    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        System.out.println("HelloServlet.service");
        System.out.println("request = " + request);
        System.out.println("response = " + response);

        String username = request.getParameter("username");
        System.out.println("username = " + username);

        // ë‹¨ìˆœ text ë¡œ ì‘ë‹µí•˜ê² ë‹¤ëŠ” ì˜ë¯¸
        response.setContentType("text/plain");
        // text ì˜ ì¸ì½”ë”© ì •ë³´
        response.setCharacterEncoding("utf-8");
        // HTTP ë©”ì‹œì§€ ë°”ë””ì— ì…ë ¥í•  ë©”ì‹œì§€ë¥¼ ì‘ì„±í•¨
        response.getWriter().write("hello" + username);
    }
```

ğŸ”Â ê²°ê³¼ í™•ì¸

- http://localhost:8080/hello?username=hi
    - url ë¡œ ì ‘ì†í•˜ë©´ ì‘ë‹µê°’ì¸ hellohi ê°€ ì¶œë ¥ë˜ì–´ìˆë‹¤.
    - ê°œë°œì ë„êµ¬ (O + C + u) ë¥¼ í™•ì¸í•´ë„ ë‹¨ìˆœ text ê°€ ì…ë ¥ëœê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ë§Œì•½ url ì˜ param ê°’ì„ ìˆ˜ì •í•˜ë©´ ìˆ˜ì •í•œëŒ€ë¡œ web ì— ì¶œë ¥ëœë‹¤.

<br>

## âœï¸Â ì •ë¦¬

[ğŸ”—Â ì„œë¸”ë¦¿ì˜ ê°œë…](https://github.com/choideakook/TIL/blob/main/Spring/8%20Spring%20MVC%20í•µì‹¬ê¸°ìˆ /1%20ì›¹%20ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜%20ì´í•´/230210%202%20ì„œë¸”ë¦¿.md)

- HTTP ìš”ì²­ì„ í†µí•´ ë§¤í•‘ëœ URL ì´ í˜¸ì¶œë˜ë©´ì„œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” Service ë©”ì„œë“œë¥¼ ì‹¤í–‰í•´ ì´ë²ˆê³¼ ê°™ì€ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚œ ê²ƒì´ë‹¤.

```java
@Override
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
```

![s8212.png](%E1%84%89%E1%85%A5%E1%84%87%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%BA%20%E1%84%89%E1%85%B5%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5%20b737260c7b3745db9fc543686ad88ee5/s8212.png)