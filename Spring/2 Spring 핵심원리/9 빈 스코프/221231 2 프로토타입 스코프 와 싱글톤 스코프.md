# í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ ì™€ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„

ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ì¡°íšŒí•˜ë©´ Container ëŠ” í•­ìƒ ê°™ì€ Instance ì˜ Bean ì„  ë°˜í™˜í•œë‹¤.

í•˜ì§€ë§Œ í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ë¥¼ Container ì— ì¡°íšŒí•˜ë©´ í•­ìƒ ìƒˆë¡œìš´ Instance ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.

## âœï¸Â ì‹±ê¸€í†¤ ë¹ˆ ìš”ì²­

![IMG_0028.PNG](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%90%E1%85%A9%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B5%E1%86%BC%E1%84%80%E1%85%B3%E1%86%AF%E1%84%90%E1%85%A9%E1%86%AB%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20caf65e94fc11435190324976b9fe53f8/IMG_0028.png)

1. Singleton ìŠ¤ì½”í”„ì˜ Bean ì„ Container ì— ìš”ì²­í•œë‹¤.
2. Container ëŠ” ë³¸ì¸ì´ ê´€ë¦¬í•˜ëŠ” Bean ì„ ë°˜í™˜í•œë‹¤.
3. ì´í›„ì— Container ì— ê°™ì€ ìš”ì²­ì´ ë“¤ì–´ì™€ë„ ê°™ì€ ê°ì²´ì˜ instance ë¥¼ ë°˜í™˜í•œë‹¤.

<br>

ğŸ”Â ì‹±ê¸€í†¤ ì‚¬ìš©ì‹œ ê°™ì€ instance ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” Test

ë¬¸ì œ ì—†ì´ ì˜ ì‘ë™ëœë‹¤.

```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonTest {

		// singleton ì€ ê¸°ë³¸ê°’ì´ë¼ ìƒëµí•´ë„ ì •ìƒì‘ë™ëœë‹¤.
    @Scope ("singleton")
    static class SingletonBean{

        @PostConstruct
        public void init() {
            System.out.println("SingletonBean.init");
        }

        @PreDestroy
        public void destroy () {
            System.out.println("SingletonBean.destor");
        }
    }

    @Test
    void singletonBeanFind (){
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SingletonBean.class);

        SingletonBean singletonBean1 = ac.getBean(SingletonBean.class);
        SingletonBean singletonBean2 = ac.getBean(SingletonBean.class);
        System.out.println("singletonBean1 = " + singletonBean1);
        System.out.println("singletonBean2 = " + singletonBean2);

        assertThat(singletonBean1).isSameAs(singletonBean2);
        ac.close();
    }
}
// SingletonBean.init
// singletonBean1 = hello.core.scope.SingletonTest$SingletonBean$$EnhancerBySpringCGLIB$$ad7af264@57ea113a
// singletonBean2 = hello.core.scope.SingletonTest$SingletonBean$$EnhancerBySpringCGLIB$$ad7af264@57ea113a
// SingletonBean.destor
```

<br>

## âœï¸Â í”„ë¡œí† íƒ€ì… ë¹ˆ ìš”ì²­

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-01-02 á„‹á…©á„Œá…¥á†« 9.47.16.png](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%90%E1%85%A9%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B5%E1%86%BC%E1%84%80%E1%85%B3%E1%86%AF%E1%84%90%E1%85%A9%E1%86%AB%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20caf65e94fc11435190324976b9fe53f8/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-01-02_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_9.47.16.png)

1. í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ Bean ì„ Container ì— ìš”ì²­í•œë‹¤.
2. Container ëŠ” ì´ ì‹œì ì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•˜ê³ , í•„ìš”í•œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…íŒë‹¤.

![IMG_0031.PNG](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%90%E1%85%A9%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B5%E1%86%BC%E1%84%80%E1%85%B3%E1%86%AF%E1%84%90%E1%85%A9%E1%86%AB%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20caf65e94fc11435190324976b9fe53f8/IMG_0031.png)

1. Container ëŠ” ìƒì„±í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•œë‹¤.
2. ì´í›„ Container ì— ê°™ì€ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.

<br>

â—ï¸í”„ë¡œí† íƒ€ì… ë¹ˆì€ ì´ˆê¸°í™”ê¹Œì§€ë§Œ ì²˜ë¦¬í•˜ë¯€ë¡œ ì´í›„ì—ëŠ” Bean ì„ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

- @PreDestory ê°™ì€ ì†Œë©¸ ì½œë°± Method ê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.

<br>

ğŸ” í”„ë¡œí† íƒ€ì… í…ŒìŠ¤íŠ¸

instance ê°€ ë‹¤ë¥¸ê±¸ í™•ì¸í•  ìˆ˜ ìˆê³  destroy ê°€ í˜¸ì¶œì´ ì•ˆëœê²ƒë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```java
package hello.core.scope;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class PrototypeTest {

    @Scope ("prototype")
    static class PrototypeBean {

        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init");
        }
        @PreDestroy
        public void destroy () {
            System.out.println("PrototypeBean.destor");
        }
    }

    @Test
    void prototypeBeanFind (){
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);

				// ìƒì„± ì§ì „ì— í•œë²ˆë” ì¶œë ¥
        System.out.println("find prototypeBean1");
        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);
        System.out.println("find prototypeBean2");
        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);
        System.out.println("prototypeBean1 = " + prototypeBean1);
        System.out.println("prototypeBean2 = " + prototypeBean2);

        assertThat(prototypeBean1).isNotSameAs(prototypeBean2);
        ac.close();
    }
}
// find prototypeBean1
// PrototypeBean.init
// find prototypeBean2
// PrototypeBean.init
// prototypeBean1 = hello.core.scope.PrototypeTest$PrototypeBean@13ad5cd3
// prototypeBean2 = hello.core.scope.PrototypeTest$PrototypeBean@1c33c17b
ac.close(); ë„ ì •ìƒ ì‘ë™ë˜ì—ˆì§€ë§Œ destroy ë§¤ì†Œë“œëŠ” ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìŒ
//11:47:26.890 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@4659191b, started on Sun Jan 01 11:47:26 KST 2023
```

<br>

â—ï¸ë§Œì•½ ì†Œë©¸ ì½œë°±ì´ í•„ìš”í•  ê²½ìš°ëŠ” ìˆ˜ë™ìœ¼ë¡œ ì§ì ‘ í˜¸ì¶œí•´ì•¼í•œë‹¤.

```java
prototypeBean1.destroy();
prototypeBean2.destroy();
ac.close();
// PrototypeBean.destor
// PrototypeBean.destor
```