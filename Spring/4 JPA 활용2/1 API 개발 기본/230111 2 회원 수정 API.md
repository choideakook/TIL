# íšŒì› ìˆ˜ì • API

## âœï¸Â íšŒì› ìˆ˜ì •í•˜ê¸°

### ğŸ“Â íšŒì› ìˆ˜ì • Method ì™€ DTO ìƒì„±

[ğŸ”—Â @AllArgsConstructor](https://github.com/choideakook/TIL/blob/main/Spring/0%20Spring%20TIL/Lombok.md)

```java
    // íšŒì› ì •ë³´ ìˆ˜ì •
    // ì²«ë²ˆì§¸ Param : put Mapping ìœ¼ë¡œ ë°›ì•„ì˜¨ id ê°’ì„ res DTO ì— ë„˜ê²¨ ìˆ˜ì •í•  id ë¥¼ ì°¾ì•„ì˜´
    // ë‘ë²ˆì§¸ Param : req DTO ì—ì„œ ìˆ˜ì •ì„ ì›í•˜ëŠ” í•„ë“œë¥¼ ê°€ì ¸ì˜´
    @PutMapping("/api/v2/members/{id}")
    public UpdateMemberResponse updateMemberV2(
            @PathVariable("id") Long id,
            @RequestBody @Valid UpdateMemberRequest request){
	    
	// ë³€ê²½ê°ì§€ë¥¼ ì´ìš©í•œ ì •ë³´ ìˆ˜ì •
        memberService.update(id, request.getName());
	
        // return ê°’ì„ ì¶©ì¡±ì‹œí‚¤ê¸° ìœ„í•œ ë¡œì§
	// update ë¡œì§ì—ì„œ id ì™€ name ì„ ë°˜í™˜ ì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ
	// ê·¸ë ‡ê²Œ ë˜ë©´ ì»¤ë§¨ë“œ, ì¿¼ë¦¬ êµ¬ë¶„ ì›ì¹™ì„ ì§€í‚¬ ìˆ˜ ì—†ê²Œë¨
        Member findMember = memberService.findOne(id);
        return new UpdateMemberResponse(findMember.getId(), findMember.getName());
    }

    // íšŒì› ìˆ˜ì • req DTO
    @Data
    static class UpdateMemberRequest {
        private String name;
    }

    // íšŒì› ìˆ˜ì • res DTO
    @Data
    @AllArgsConstructor // DTO ë‚´ì˜ ëª¨ë“  í•„ë“œê°’ì„ Param ìœ¼ë¡œ ê°–ëŠ” ìƒì„±ìê°€ ìƒì„±ë¨
    static class UpdateMemberResponse{
        private Long id;
        private String name;
    }
```

### ğŸ“Â MemberService.update ë¡œì§ ë§Œë“¤ê¸°

```java
// ë³€ê²½ê°ì§€ë¥¼ ì´ìš©í•œ ì •ë³´ ìˆ˜ì •
@Transactional
public void update(Longid, Stringname) {
    Membermember= memberRepository.findOne(id);
    member.setName(name);
}
```

<br>

## âœï¸Â Test ì‹¤í–‰

### ğŸ“Â íšŒì› ë“±ë¡

name í•„ë“œì— hello2 ë¥¼ send í•´ì„œ

id ê°’ì´ 2 ì¸ íšŒì›ì´ ë“±ë¡ë˜ì—ˆë‹¤.

<img width="452" alt="s411121" src="https://user-images.githubusercontent.com/115536240/211946305-593e1639-adcc-4047-84eb-86bcdf0a71c2.png">

<br>

### ğŸ“Â ì •ë³´ ìˆ˜ì •

post man ìœ¼ë¡œ ë“±ë¡ëœ íšŒì›ì •ë³´ë¥¼ ìˆ˜ì •í•˜ê¸°

- post â†’ put
- url ìˆ˜ì •

<img width="452" alt="s411122" src="https://user-images.githubusercontent.com/115536240/211946311-48082962-e4b0-4664-b7f7-78c36c94baa6.png">

<br>

send ë¡œ ì‹¤í–‰ ì‹œí‚¤ë©´ ì •ìƒì ìœ¼ë¡œ ë°ì´í„°ê°€ ìˆ˜ì •ë˜ì—ˆë‹¤.

<img width="376" alt="s411123" src="https://user-images.githubusercontent.com/115536240/211946314-5c993066-5c3c-4678-8500-4c8d789d5869.png">

<br>

intellij ì—ë„ ë³€ê²½ message ê°€ ì˜ ë‚˜ì˜¨ë‹¤.

<img width="450" alt="s411124" src="https://user-images.githubusercontent.com/115536240/211946316-c427e007-f17a-40d6-9fb0-07379705b0be.png">
