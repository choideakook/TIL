# 0. ì¡°íšŒìš© ìƒ˜í”Œ ë°ì´í„° ì…ë ¥

ì»´íŒŒì¼ì´ ì‹œì‘ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ì„¸íŒ…í•´ë†“ì€ DB ë¥¼ ì œì™¸í•˜ê³  ì´ˆê¸°í™”ë˜ê²Œ ì„¸íŒ…í•˜ê¸°

<br>

### ğŸ“appllication.yml ì„¤ì • ë³€ê²½

jpa - ddl-auto : create ë¡œ ìˆ˜ì •

<br>

### ğŸ“Â DB ì…ë ¥ method ìƒì„±

[ğŸ”—Â ê°€ë³€ì¸ì ì‚¬ìš©ë²•](https://github.com/choideakook/TIL/blob/main/Java/230107%20ê°€ë³€ì¸ì%20(Varargs).md)

create ë¡œ ë¦¬ì…‹ì´ëœí›„ ìë™ìœ¼ë¡œ ê°™ì€ DB ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ë¡œì§ì„ ë§Œë“¤ì–´ë‘”ë‹¤.

```java
package jpabook.jpashop;

import jpabook.jpashop.domain.*;
import jpabook.jpashop.domain.item.Book;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

import javax.annotation.PostConstruct;
import javax.persistence.EntityManager;

@Component
@RequiredArgsConstructor
public class InitDB {

    private final InitService initService;

    @PostConstruct
    public void init() {
        initService.dbInit1();
    }

    @Component
    @Transactional
    @RequiredArgsConstructor
    static class InitService{

        private final EntityManager em;

        public void dbInit1 () {
            Member member = createMember("userA", "ì„œìš¸", "1", "1111");
            em.persist(member);

            Book book1 = createBook("JPA1 BOOK", 10000, 100);
            em.persist(book1);

            Book book2 = createBook("JPA2 BOOK", 20000, 100);
            em.persist(book2);

            OrderItem orderItem1 = OrderItem.createOrderItem(book1, 10000, 1);
            OrderItem orderItem2 = OrderItem.createOrderItem(book2, 20000, 2);

						// ê°€ë³€ì¸ì ë•ë¶„ì— orderItem ì´ ì—¬ëŸ¬ê°œê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŒ
						// public static Order createOrder(Member member, Delivery delivery, OrderItem... orderItems)
            Order order = Order.createOrder(member, createDelivery(member), orderItem1, orderItem2);
            em.persist(order);
        }

        public void dbInit2 () {
            Member member = createMember("userB", "ì „ì£¼", "2", "2222");
            em.persist(member);

            Book book1 = createBook("SPRING1 BOOK", 20000, 200);
            em.persist(book1);

            Book book2 = createBook("SPRING2 BOOK", 40000, 300);
            em.persist(book2);

            OrderItem orderItem1 = OrderItem.createOrderItem(book1, 20000, 2);
            OrderItem orderItem2 = OrderItem.createOrderItem(book2, 40000, 4);

            Order order = Order.createOrder(member, createDelivery(member), orderItem1, orderItem2);
            em.persist(order);
        }

        private Member createMember(String name, String city, String street, String zipcode) {
            Member member = new Member();
            member.setName(name);
            member.setAddress(new Address(city, street, zipcode));
            return member;
        }

        private Book createBook(String name, int price, int stockQuantity) {
            Book book = new Book();
            book.setName(name);
            book.setPrice(price);
            book.setStockQuantity(stockQuantity);
            return book;
        }

        private Delivery createDelivery(Member member) {
            Delivery delivery = new Delivery();
            delivery.setAddress(member.getAddress());
            return delivery;
        }
    }
}
```