# ìŠ¤í”„ë§ ë¹ˆê³¼ ì˜ì¡´ê´€ê³„

## âœï¸Bean ì´ë€

IoC ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ê°ì²´

## âœï¸Â Java Spring ì˜ ì •í˜•í™”ëœ ì„œë¹„ìŠ¤ ë°©ì‹

1. Controller : ì™¸ë¶€ ìš”ì²­ì„ ë°›ì•„ì˜´
2. Service : ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ë§Œë“¬
3. Repository : ëª¨ë“  ë°ì´í„°ë¥¼ ì €ì¥í•¨

## âœï¸Â ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ë°©ë²•

1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ìë™ ì˜ì¡´ê´€ê³„ ì„¤ì •
2. ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡

ğŸ’¡Â ì •í˜•í™”ëœ ì»¨íŠ¸ë¡¤ëŸ¬, ë¦¬í¬ì§€í† ë¦¬, ì„œë¹„ìŠ¤ ê°™ì€ ì½”ë“ ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•œë‹¤.

ğŸ’¡Â ì •í˜•í™” ë˜ì§€ ì•Šê±°ë‚˜, ìƒí™©ì— ë”°ë¼ êµ¬í˜„ Class ë¥¼ ë³€ê²½í•´ì•¼ í•  ê²½ìš° ì§ì ‘ Spring Bean ìœ¼ë¡œ ë“±ë¡í•œë‹¤. 

  â€» ìƒí™©ì— ë”°ë¼ êµ¬í˜„ Class ë¥¼ ë³€ê²½í•´ì•¼ í•  ê²½ìš° :

ì €ì¥ì†Œ (repository) ê°€ ë³€ê²½ë˜ì–´ ê¸°ì¡´ì˜ ì €ì¥ì†Œë¥¼ í•´ì œí•˜ê³  ìƒˆë¡œìš´ ì €ì¥ì†Œë¡œ ë°”ê¿”ì•¼ë ê²½ìš° @repository ê°€ ë‘ê°œê°€ ë˜ë¯€ë¡œ ì´ ê²½ìš°ì—ëŠ” ìˆ˜ë™ìœ¼ë¡œ ì–´ë–¤ ì €ì¥ì†Œë¥¼ repository ë¡œ ì—°ê²°í• ì§€ ì§ì ‘ ë“±ë¡í•´ì¤˜ì•¼í•œë‹¤.

## ğŸ’¡Â 1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ìë™ ì˜ì¡´ê´€ê³„ ì„¤ì • ë°©ë²•

### âš ï¸Â ì—­í• ì„ í‘œì‹œí•˜ëŠ” ë°©ë²•

ì•„ë¬´ëŸ° ì–´ë…¸í…Œì´ì…˜ì´ ë˜ì–´ìˆì§€ ì•Šì€ Class ëŠ” Spring ì´ ì¸ì‹í•  ìˆ˜ ì—†ì–´ Autowired ë¥¼ ë„£ì–´ë„ Spring ì´ ì¸ì‹í•  ìˆ˜ ì—†ë‹¤.

- ê° í´ë ˆìŠ¤ì— ì—­í• ì— ë§ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤€ë‹¤
    - @Component ì–´ë…¸í…Œì´ì…˜ì´ ìˆê±°ë‚˜ í¬í•¨í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœë‹¤.
    - ì•„ë˜ ì˜ˆì‹œì— ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ë“¤ì€ ëª¨ë‘ @Componentë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.
- ì–´ë…¸í…Œì´ì…˜ì„ ì˜ ë¶™ì—¬ì£¼ë©´ ì»´íŒŒì¼ì´ ì‹¤í–‰ë˜ë©´ì„œ Spring Container ë¼ëŠ” ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ê³  Auto wire ê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ Class ë“¤ì„ ì—°ê²°í•´ì¤€ë‹¤.
- Spring Container ì— ë¹ˆì„ í†µí•´ ë“±ë¡ë  ë•Œ , ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í„´ìœ¼ë¡œ ë“±ë¡ëœë‹¤.
    - ì‹±ê¸€í„´ : í•˜ë‚˜ì˜ ì–´ë…¸í…Œì´ì…˜ì€ í•˜ë‚˜ì˜ í´ë ˆìŠ¤ë§Œ ì €ì¥ë¨
    - ë§Œì•½ ê°™ì€ ì–´ë…¸í…Œì´ì…˜ì„ ë‹¤ë¥¸ class ì—ë„ ì‚¬ìš©í• ê²½ìš° ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ëœë‹¤.

```java
@Controller
public class MemberController {
```

```java
@Service
public class MemberService {
```

```java
@Repository
public class MemoryMemberRepository implements MemberRepository{
```

  

### âš ï¸Â ì´ëŸ¬í•œ ì—­í• ì„ ê°€ì§„ Class ë“¤ì„ ì—°ê²°í•˜ê¸°ìœ„í•œ ë°©ë²•

- Auto Wired (ğŸ“public class ì— ìƒì„±ìê°€ í•˜ë‚˜ë°–ì—ì—†ì„ ë•Œ Auto Wired ìƒëµ ê°€ëŠ¥)
    
    @Autowired ê°€ ë“¤ì–´ê°„ ìƒì„±ì ëŠ” Spring ì´ ìë™ìœ¼ë¡œ í•´ë‹¹ class ë¥¼ Spring Container ì—ì„œ ì°¾ì•„ public Class ì™€ ì—°ê²°í•´ì¤Œ
    
- Controller -> Service -> Repository

```java
// Controller -> Service ì—°ê²°

@Controller
public class MemberController {

		// <<  DI ë°©ì‹ (ë””íœë”ì¦ˆ ì¸ì ì…˜ : ìƒì„±ì ì£¼ì…ë°©ì‹)
    private final MemberService memberService;

    @Autowired
    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }
    // >>
}
```

```java
// Service -> Repository ì—°ê²°

@Service
public class MemberService {

    // <<  DI ë°©ì‹ (ë””íœë”ì¦ˆ ì¸ì ì…˜ : ìƒì„±ì ì£¼ì…ë°©ì‹)
    private final MemberRepository memberRepository;

    @Autowired
    public MemberService(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
    // >>
```

## ğŸ’¡Â 2. ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡

ì½”ë“œë¡œ ì§ì ‘ ë¹ˆì„ ë“±ë¡í•˜ë”ë¼ë„ ì‹œì‘ì ì´ ë˜ëŠ” Controller ì˜ ìœ„ì¹˜ëŠ” ì¡ì•„ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì»¨íŠ¸ë¡¤ëŸ¬ì—ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ê³  ì—°ê²°í•´ì•¼ë˜ëŠ” ì„œë¹„ìŠ¤ í´ë ˆìŠ¤ì—ë„ Auto wire ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤˜ì•¼í•œë‹¤.

(Contoller Class ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ì¼„ê³¼ ë™ì¼í•¨)

### a. Controller Method

```java
@Controller
public class MemberController {

    private final MemberService memberService;

    @Autowired
    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }
}
```

### b. Spring Config Method

ìœ„ì¹˜ : main Method ì™€ ê°™ì€ ìœ„ì¹˜ì— ìœ„ì¹˜í•´ì•¼ë¨

```java
package hello.hellospring;

import hello.hellospring.repository.MemberRepository;
import hello.hellospring.repository.MemoryMemberRepository;
import hello.hellospring.service.MemberService;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class SpringConfig {

// ì—°ê²°ì„ ì›í•˜ëŠ” Class ë“¤ì„ ìˆ˜ë™ìœ¼ë¡œ Spring Bean ìœ¼ë¡œ ë“±ë¡ì‹œì¼œì¤Œ
    @Bean
    public MemberService memberService(){
        return new MemberService(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository(){
        return new MemoryMemberRepository();
    }
}
```

### â€» ì €ì¥ì†Œ (repository) ë¥¼ ë³€ê²½í•´ì•¼ í•  ê²½ìš°

ê¸°ì¡´ repository ê°€ ì—°ê²°í•˜ê³  ìˆëŠ” Class ë¥¼ ìƒˆë¡œìš´ Class ë¡œ ë³€ê²½í•´ì£¼ë©´ ëœë‹¤.

Ex)

```java
/**
 * ê¸°ì¡´ ì €ì¥ì†Œ ì™€ ì—°ê²°ë˜ì—ˆë˜ ì½”ë“œ
@Bean 
    public MemberRepository memberRepository(){
        return new MemoryMemberRepository();
    }
 */

// ìƒˆë¡œìš´ ì €ì¥ì†Œì— ì—°ê²° (new ë’¤ì— class ëª…ì„ ìƒˆë¡œìš´ class ë¡œ ë³€ê²½)
@Bean
    public MemberRepository memberRepository(){
        return new DbMemberRepository();
    }
```
