# ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ë¡œê·¸ ë‚¨ê¸°ê¸°

## âœï¸Â SQL ì‹¤í–‰ íŒŒë¼ë¯¸í„°ë¥¼ ë¡œê·¸ë¡œ ë‚¨ê¸°ëŠ” ë°©ë²•

- Spring Boot 2 . X . X ë²„ì „

```java
org.hibernate.type: trace
```

- Spring Boot 3 . X . X ë²„ì „

```java
org.hibernate.orm.jdbc.bind: trace
```

- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
    
    [https://github.com/gavlyukovskiy/spring-boot-data-source-decorator](https://github.com/gavlyukovskiy/spring-boot-data-source-decorator)
    
- Spring Boot ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì¶”ê°€í•˜ë©´ ëœë‹¤.

```java
implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.5.6'
```

â—ï¸ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ë¡œê·¸ë¡œ ë‚¨ê¸°ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì‹œìŠ¤í…œ ìì›ì„ ì‚¬ìš©í•˜ë¯€ë¡œ, ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” í¸í•˜ê²Œ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ ìš´ì˜ì‹œìŠ¤í…œì— ì ìš©í•˜ë ¤ë©´ ê¼­ ì„±ëŠ¥í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê³  ì‚¬ìš©í•´ì•¼í•œë‹¤.

<br>

## âœï¸Â ì ìš©í•˜ê¸°

ì„¤ì •ì„ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ DB ì— ì •ë³´ë¥¼ insert í•˜ë©´ ì¶”ê°€ëœ ê°’ì´ ë‚˜íƒ€ë‚˜ì§€ ì•Šì•„ì„œ ë‹µë‹µí•˜ë‹¤.

```java
insert 
    into
        member
        (username, id) 
    values
        (?, ?)
```

application.yml â†’ loggint â†’ level ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ë©´ íŒŒë¼ë¯¸í„°ê°’ì´ ê°ê° ë‚˜íƒ€ë‚˜ê²Œ ëœë‹¤.

```java
insert 
    into
        member
        (username, id) 
    values
        (?, ?)
TRACE 3893 --- [main]: binding parameter [1] as [VARCHAR] - [memberA]
TRACE 3893 --- [main]: binding parameter [2] as [BIGINT] - [1]
```

memberA ì™€ 1L ì´ ì¶”ê°€ëœê±¸ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ ê°’ì´ ë„ˆë¬´ ë’¤ìª½ì— í‘œì‹œë˜ì–´ì„œ ì•„ì§ ë¶ˆí¸í•˜ë‹¤.

ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ì„œ ë” ê°„ë‹¨í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

- P6Spy ë¥¼ ì‚¬ìš©í–ˆë‹¤.

```java
dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
	implementation 'org.springframework.boot:spring-boot-starter-validation'
	implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-devtools'
	// ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ (ë²„ì „ì€ ê·¸ë•Œê·¸ë•Œ github ë³´ê³  ë°”ê¿”ì£¼ë©´ ëœë‹¤.)
	implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.8.1'

	compileOnly 'org.projectlombok:lombok'
	runtimeOnly 'com.h2database:h2'
	annotationProcessor 'org.projectlombok:lombok'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
```

ğŸ”Â ì¶œë ¥ í™•ì¸

```java
insert 
    into
        member
        (username, id) 
    values
        (?, ?)
2023-01-04 16:06:43.340 TRACE 3961 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [memberA]
2023-01-04 16:06:43.340 TRACE 3961 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [BIGINT] - [1]
// p6spy ì‘ë™
2023-01-04 16:06:43.341  INFO 3961 --- [           main] p6spy                                    : #1672816003341 | took 0ms | statement | connection 3| url jdbc:h2:tcp://localhost/~/jpashop
insert into member (username, id) values (?, ?)
// ì—¬ê¸°ì„œ ê°’ì„ í™•ì¸í•˜ë©´ ëœë‹¤.
insert into member (username, id) values ('memberA', 1);
2023-01-04 16:06:43.342  INFO 3961 --- [           main] p6spy
```