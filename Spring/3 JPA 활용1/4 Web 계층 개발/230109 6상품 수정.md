# ìƒí’ˆ ìˆ˜ì •

ìƒí’ˆ ìˆ˜ì • ë²„íŠ¼ì— th:href="@{/items/{id}/edit (id=${item.id})} ì´ìª½ìœ¼ë¡œ ë§í¬ê°€ ê±¸ë ¤ìˆë‹¤.

- Get Mapping ìœ¼ë¡œ ë§í¬ë¥¼ ê°€ì ¸ì™€ì„œ ë¡œì§ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

```java
<td>
<a href="#" th:href="@{/items/{id}/edit (id=${item.id})}" class="btn btn-primary" role="button">ìˆ˜ì •</a>
</td>
```

## âœï¸Â Controller Method êµ¬í˜„

### ğŸ“Â ìˆ˜ì • page method

- @PathVariable
    - ì§€ê¸ˆì²˜ëŸ¼ url ì´ í´ë¼ì´ì–¸íŠ¸ì˜ ì„ íƒì— ë”°ë¼ ë‹¬ë¼ì €ì•¼ í•  ê²½ìš° id ê°’ì— ë§ì¶°ì„œ ë³€í™˜ì‹œí‚¤ëŠ” ê¸°ëŠ¥
- ì‹¤ë¬´ì—ì„œëŠ” findOne ì„ Item ê°ì²´ì— ë‹´ì•„ì„œ ì‚¬ìš©í•˜ì§€ë§Œ í¸ì˜ë¥¼ ìœ„í•´ì„œ ê°•ì˜ì—ì„œëŠ” Book ì— casting í•´ì„œ ì„œìš©í•¨

```java
    @GetMapping("items/{itemId}/edit")
    public String updateItemForm(@PathVariable("itemId") Long itemId, Model model) {
        Book item = (Book) itemService.findOne(itemId);

        BookForm form = new BookForm();
        form.setId(item.getId());
        form.setName(item.getName());
        form.setPrice(item.getPrice());
        form.setStockQuantity(item.getStockQuantity());
        form.setAuthor(item.getAuthor());
        form.setIsbn(item.getIsbn());

        model.addAttribute("form", form);
        return "items/updateItemForm";
    }
```

<br>

### ğŸ“Â ì¬ì¶œ method

ì¬ì¶œ method ì—ì„œëŠ” @PathVariable ëŒ€ì‹  @ModelAttribute (â€formâ€) ê°€ í•„ìš”í•˜ë‹¤.

- ìƒí’ˆì„ ë“±ë¡í•  ë•Œ ì™€ ë¡œì§ì´ ë¹„ìŠ·í•˜ì§€ë§Œ id ê°’ì„ set í•´ì¤˜ì•¼ í•œë‹¤.

```java
package jpabook.jpashop.controller;

import jpabook.jpashop.domain.item.Book;
import jpabook.jpashop.domain.item.Item;
import jpabook.jpashop.service.ItemService;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;

import java.util.List;

@Controller
@RequiredArgsConstructor
public class ItemController {

    private final ItemService itemService;

    @GetMapping(value = "/items/new")
    public String createForm(Modelmodel) {
	model.addAttribute("form", new BookForm());
        return "items/createItemForm";
    }

    @PostMapping(value = "/items/new")
    public String create(BookFormform) {
        Bookbook= new Book();
	book.setName(form.getName());
        book.setPrice(form.getPrice());
        book.setStockQuantity(form.getStockQuantity());
        book.setAuthor(form.getAuthor());
        book.setIsbn(form.getIsbn());
        itemService.saveItem(book);
        return "redirect:/items";
    }

    @GetMapping(value = "/items")
    public String list(Modelmodel) {
        List<Item>items= itemService.findItems();
        model.addAttribute("items",items);
        return "items/itemList";
    }

    @GetMapping("items/{itemId}/edit")
    public String updateItemForm(@PathVariable("itemId") LongitemId, Modelmodel) {
        Bookitem= (Book) itemService.findOne(itemId);

        BookFormform= new BookForm();
        form.setId(item.getId());
        form.setName(item.getName());
        form.setPrice(item.getPrice());
        form.setStockQuantity(item.getStockQuantity());
        form.setAuthor(item.getAuthor());
        form.setIsbn(item.getIsbn());

        model.addAttribute("form",form);
        return "items/updateItemForm";
    }

    @PostMapping("items/{itemId}/edit")
    public String updateItem(@ModelAttribute("form") BookFormform) {
        Bookbook= new Book();
        book.setId(form.getId());
        book.setName(form.getName());
        book.setPrice(form.getPrice());
        book.setStockQuantity(form.getStockQuantity());
        book.setAuthor(form.getAuthor());
        book.setIsbn(form.getIsbn());
        itemService.saveItem(book);

        return "redirect:/items";
    }
}
```

<br>

### ğŸ“Â items/updateItemForm.html

```java
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header" />
<body>
<div class="container">
    <div th:replace="fragments/bodyHeader :: bodyHeader"/>

    <form th:object="${form}" method="post">
        <!-- id -->
        <input type="hidden" th:field="*{id}" />

        <div class="form-group">
            <label th:for="name">ìƒí’ˆëª…</label>
            <input type="text" th:field="*{name}" class="form-control" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" /> 
				</div>

        <div class="form-group">
            <label th:for="price">ê°€ê²©</label>
            <input type="number" th:field="*{price}" class="form-control" placeholder="ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <div class="form-group">
            <label th:for="stockQuantity">ìˆ˜ëŸ‰</label>
            <input type="number" th:field="*{stockQuantity}" class="form-control" placeholder="ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <div class="form-group">
            <label th:for="author">ì €ì</label>
            <input type="text" th:field="*{author}" class="form-control" placeholder="ì €ìë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <div class="form-group">
            <label th:for="isbn">ISBN</label>
            <input type="text" th:field="*{isbn}" class="form-control" placeholder="ISBNì„ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>

    </form>
    <div th:replace="fragments/footer :: footer" />
</div> <!-- /container -->
</body>
</html>
```
