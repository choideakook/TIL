# My Batis ì˜ ë™ì  ì¿¼ë¦¬

My Batis ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ í° ì´ìœ ëŠ” ë™ì  ì¿¼ë¦¬ë¥¼  í¸ë¦¬í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

## âœï¸Â ê³µì‹ ë¬¸ì„œì˜ ì˜ˆì œë¥¼ ì°¸ê³ í•œ ë™ì  SQL

- if
- choose ( when, otherwise)
- trim (where, set)
- foreach

<br>

### ğŸ“Â If

- í•´ë‹¹ ì¡°ê±´ì— ë”°ë¼ ê°’ì„ ì¶”ê°€í• ì§€ ë§ì§€ íŒë‹¨í•œë‹¤.
- ë‚´ë¶€ì˜ ë¬¸ë²•ì€ OGNL ì„ ì‚¬ìš©í•œë‹¤.

```xml
<select id="findActiveBlogWithTitleLike"
       resultType="Blog">
    SELECT * FROM BLOG
    WHERE state = â€˜ACTIVEâ€™
    <if test="title != null">
      AND title like #{title}
    </if>
</select>
```

<br>

### ğŸ“Â choose ( when, otherwise)

- java ì˜ switch ë¬¸ê³¼ ë¹„ìŠ·í•˜ë‹¤.
    - when ì„ ë§Œì¡±í•˜ë©´ í•´ë‹¹ when ì ˆì´ ì‹¤í–‰ëœë‹¤.
    - ë§Œì¡±í•˜ëŠ” when ì ˆì´ ì—†ëŠ”ê²½ìš° otherwise ì ˆì´ ì‹¤í–‰ëœë‹¤.

```xml
<select id="findActiveBlogLike"
       resultType="Blog">
    SELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™
    <choose>
      <when test="title != null">
        AND title like #{title}
      </when>
      <when test="author != null and author.name != null">
        AND author_name like #{author.name}
      </when>
      <otherwise>
        AND featured = 1
      </otherwise>
    </choose>
</select>
```

### ğŸ“Â trim (where, set)

- where ëŠ” ì•ˆì˜ ë¬¸ì¥ì´ ì—†ì„ê²½ìš° ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ë§Œì•½ and ê°€ ìˆëŠ” if ë¬¸ì´ ì²˜ìŒìœ¼ë¡œ ì‹œì‘ë  ê²½ìš° and ë¥¼ ì§€ìš°ê³  where ë¡œ ë°”ê¿”ì¤€ë‹¤.

```xml
<select id="findActiveBlogLike"
       resultType="Blog">
    SELECT * FROM BLOG
    <where>
      <if test="state != null">
           state = #{state}
      </if>
      <if test="title != null">
          AND title like #{title}
      </if>
      <if test="author != null and author.name != null">
          AND author_name like #{author.name}
      </if>
    </where>
</select>
```

### ğŸ“Â foreach

- Collection ì„ ë°˜ë³µ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©ë¨
    - parameter ë¥¼ list ë¡œ ì „ë‹¬ í•  ìˆ˜ ìˆë‹¤.

```xml
<select id="selectPostIn" resultType="domain.blog.Post">
    SELECT *
    FROM POST P
    <where>
      <foreach item="item" index="index" collection="list"
          open="ID in (" separator="," close=")" nullable="true">
            #{item}
      </foreach>
    </where>
</select>

```