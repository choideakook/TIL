# íšŒì› ì„œë¹„ìŠ¤ ê°œë°œ

repository ì—ì„œëŠ” ê·¼ë³¸ì ì´ì§€ë§Œ ë‹¨ìˆœí•œ input output ê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆë‹¤ë©´

service ì—ì„œëŠ” ì¡°ê¸ˆë” í´ë¼ì´ì–¸íŠ¸ ì¹œí™”ì ì¸ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì•¼í•œë‹¤.

<aside>
ğŸ’¡ ì£¼ìš” ì„œë¹„ìŠ¤

</aside>

1. join : íšŒì›ê°€ì… (ì¤‘ë³µ ì²´í¬ ê¸°ëŠ¥ í¬í•¨)
2. find members : ì „ì²´ íšŒì› ì¡°íšŒ
3. find one : íšŒì› id ì¡°íšŒ

---

## 0. member repository ë³€ìˆ˜ ìƒì„±

- ì¸ìŠ¤í„´ìŠ¤ë¡œ ìƒì„±í• ê²½ìš° ë‹¤ë¥¸ repository ë³€ìˆ˜ë“¤ê³¼ ë…ë¦½ëœ ê°œë³„ì ì¸ ê°ì²´ê°€ ìƒì„±ë˜ë¯€ë¡œ ì™¸ë¶€ì—ì„œ ì„¤ì •ì‹œí‚¬ ìˆ˜ ìˆëŠ” ìƒì„±ì ë°©ì‹ì„ í†µí•´ ì„ ì–¸í•´ì¤€ë‹¤

```java
public class MemberService {
					// ë³€ìˆ˜ë¡œ ìƒì„±
    private final MemberRepository memberRepository;
					// ìƒì„±ìë¥¼ í†µí•´ test ì½”ë“œì—ì„œ ì‘ì„±ëœ ê°’ë„ ì¤‘ì²©ë˜ê²Œ ë§Œë“¤ì–´ì¤Œ
    public MemberService(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
```

## 1.  join (íšŒì›ê°€ì…)

```java
		/**
     * íšŒì› ê°€ì…
     */
    public Long join (Member member){
            // ì´ë¦„ ì¤‘ë³µê²€ì‚¬ -> ë¦¬íŒ©í† ë§ì„ ìœ„í•œ method í™”
        validateDuplicateMember(member);
						// ì…ë ¥ëœ ê°’ì„ map ì— ì €ì¥
        memberRepository.save(member);
        return member.getId();
    }

				// -> í•´ë‹¹ method ìƒì„¸ ì½”ë“œ
private void validateDuplicateMember(Member member) {
						// ê°ì²´ê°€ optional ì¼ë•Œë§Œ ì‚¬ìš©ê°€ëŠ¥í•œ ë°©ì‹
        memberRepository.findByName(member.getName())
						// ë§Œì•½ ì¤‘ë³µì´ ì—†ì„ê²½ìš° ë‹¤ìŒì½”ë“œë¡œ ë„˜ì–´ê°
                .ifPresent(m -> {
            throw new IllegalStateException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
        });
    }
```

## 2. find members (ëª¨ë“  íšŒì› ì¡°íšŒ) / find one ( id ì¡°íšŒ)

```java
/**
     * ì „ì²´ íšŒì› ì¡°íšŒ
     */
    public List<Member> findMembers(){
        return memberRepository.findAll();
    }

    /**
     * id ì¡°íšŒ
     */
    public Optional<Member> findOne (Long memberId){
        return memberRepository.findById(memberId);
    }
```

---

## 

<aside>
ğŸ’¡ ìƒˆë¡­ê²Œ ì•Œê²Œëœ method

</aside>

1. isPresent
    - boolean data type
    - ê°ì²´ê°€ Optional type ì¼ ê²½ìš°ë§Œ ì‚¬ìš© ê°€ëŠ¥
    - ê°ì²´ê°€ ê°’ì„ ê°–ê³ ìˆë‹¤ë©´ true / ì—†ë‹¤ë©´ false

```java
Optional <Member> result = memberRepository.findByName(member.getName())
			if (result.isPresent()) System.out.println("ì´ë¯¸ ì‚¬ìš©ì¤‘");
			else System.out.println("ì‚¬ìš© ê°€ëŠ¥");
```

1. ifPresent
    - ê°ì²´ê°€ Optional type ì¼ ê²½ìš°ë§Œ ì‚¬ìš© ê°€ëŠ¥
    - ê°ì²´ê°€ ê°’ì„ ê°€ì§€ê³  ìˆì„ê²½ìš° ì‹¤í–‰ / ì—†ìœ¼ë©´ ë„˜ì–´ê°

```java
memberRepository.findByName(member.getName())
                .ifPresent(m -> {
            throw new IllegalStateException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
        });
```

[[íšŒì› ê´€ë¦¬ ê°œë°œ : ëª©ì°¨]](https://github.com/choideakook/choideakook.github.io/blob/master/_posts/-Boot/2022-12-2-member.md)

[[íšŒì› ê´€ë¦¬ ê°œë°œ : ì„œë¹„ìŠ¤ í´ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ ì½”ë“œ]](https://github.com/choideakook/choideakook.github.io/blob/master/_posts/-Boot/2022-12-5-TestCase.md)

[[ì°¸ê³  ìë£Œ : ê¹€ì˜í•œ 11ê°• íšŒì›ì„œë¹„ìŠ¤ê°œë°œ]](https://www.youtube.com/watch?v=Ep-CIHRghFw&list=PLumVmq_uRGHgBrimIp2-7MCnoPUskVMnd&index=12)
