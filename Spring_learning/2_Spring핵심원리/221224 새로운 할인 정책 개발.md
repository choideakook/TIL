# ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

## âœï¸Â ë³€ê²½ì‚¬í•­

- í• ì¸ ì •ì±… ë³€ê²½ : ê³ ì •ê¸ˆì•¡ í• ì¸ â†’ ì •ë¥  í• ì¸

## âœï¸Â êµ¬í˜„ì²´ ì œì‘

ì •ë¥  í• ì¸ìœ¼ë¡œ ë°”ê¾¸ê¸°ìœ„í•´ ì •ë¥  í• ì¸ ê¸°ëŠ¥ì„ í•˜ëŠ” Class ì œì‘

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy {

    private final int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {

        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
```

### Test case

ğŸ“Â VIP ë“±ê¸‰ì¼ ê²½ìš°

@DisplayName ëŠ” Test ì‹¤í–‰ì‹œ method ì´ë¦„ì„ ê´„í˜¸ ì•ˆì˜ ë‚´ìš©ìœ¼ë¡œ ë³€ê²½í•´ì¤Œ

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

class RateDiscountPolicyTest {

    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIP 10% í• ì¸ ê¸°ëŠ¥")
    void vip_o (){
        Member member = new Member(1L, "MemberVIP", Grade.VIP);

        int discount = discountPolicy.discount(member, 10000);

        assertThat(discount).isEqualTo(1000);
    }
}
// VIP 10% í• ì¸ ê¸°ëŠ¥ V
```

ğŸ“Â ì¼ë°˜ íšŒì›ì¼ ê²½ìš°

```java
@Test
    @DisplayName("ì¼ë°˜íšŒì› í• ì¸ ì ìš© ì—†ìŒ")
    void vip_x () {
        Member member = new Member(1L, "MemberBasic", Grade.BASIC);

        int discount = discountPolicy.discount(member, 10000);

        assertThat(discount).isEqualTo(0);
    }
// ì¼ë°˜íšŒì› í• ì¸ ì ìš© ì—†ìŒ V
```

## âœï¸Â ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©

Order Service Impl ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ê²½í•´ì¤˜ì•¼í•œë‹¤.

```java
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepositry();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
```

### â—ï¸ ë¬¸ì œì  ë°œê²¬

- ì—­í• ê³¼ êµ¬í˜„ ë¶„ë¦¬ âœ…
- ë‹¤í˜•ì„± í™œìš©ê³¼ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ê°ì²´ ë¶„ë¦¬ âœ…
- DIP ì›ì¹™ ì¤€ìˆ˜ â
    - ì¶”ìƒí™”ì¸ interface ì™¸ì— êµ¬ì²´í™”ì¸ êµ¬í˜„ Class ì—ë„ ì˜ì¡´í•˜ê³  ìˆë‹¤.
- OCP ì›ì¹™ ì¤€ìˆ˜ â
    - ê¸°ëŠ¥ì˜ í™•ì¥ì‹œ ê¸°ì¡´ Class ì˜ ë³€ê²½ì„ í•˜ë©´ ì•ˆë˜ì§€ë§Œ DIP ë¥¼ ìœ„ë°˜í–ˆê¸° ë•Œë¬¸ì— ìì—°ìŠ¤ëŸ½ê²Œ Order Service Impl ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆë‹¤.